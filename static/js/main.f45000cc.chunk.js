(this["webpackJsonpinfinity-cash-app"]=this["webpackJsonpinfinity-cash-app"]||[]).push([[0],{158:function(e,a,t){e.exports={loading:"Loading_loading__1bd-E",title:"Loading_title__1BxWR"}},271:function(e,a,t){e.exports={monthPicker:"MonthPicker_monthPicker__1OUBS"}},287:function(e,a,t){e.exports={btn:"Button_btn__2sf7z"}},292:function(e,a,t){},35:function(e,a,t){e.exports={headerTransaction:"AddTransaction_headerTransaction__3QJ8c",leftHome:"AddTransaction_leftHome__3shMw",title:"AddTransaction_title__2AX45",formContainer:"AddTransaction_formContainer__2JvFb",buttonContainer:"AddTransaction_buttonContainer__Gcyt8",date:"AddTransaction_date__2HMxw",nota:"AddTransaction_nota__1N1Ip",formContent:"AddTransaction_formContent__2uFjP",amount:"AddTransaction_amount__uAzbC",labelAmount:"AddTransaction_labelAmount__2CuBm",buttonCancel:"AddTransaction_buttonCancel__30_Xm"}},44:function(e,a,t){e.exports={container:"AddCategory_container__3QU6t",header:"AddCategory_header__2O-Ta",categoryLink:"AddCategory_categoryLink__1Zmtk",title:"AddCategory_title__tX9JQ",wrapper:"AddCategory_wrapper__2zSgN",fielset:"AddCategory_fielset__1PJcu",labelInput:"AddCategory_labelInput__3rZR9",label:"AddCategory_label__18XUB",image:"AddCategory_image__2a_uQ"}},49:function(e,a,t){e.exports={header:"Home_header__35rkk",imgHeader:"Home_imgHeader__38f7r",bottomMenu:"Home_bottomMenu__1167K",newIncome:"Home_newIncome__2kvgc",newExpense:"Home_newExpense__1-sYy",main:"Home_main__1oLAT",transactionSumary:"Home_transactionSumary__28SQv",dataEmpty:"Home_dataEmpty__37rsE"}},54:function(e,a,t){e.exports={container:"CategoryList_container__2NRxL",category:"CategoryList_category__221LJ",imgCategoryBox:"CategoryList_imgCategoryBox__ABg7l",categorySelected:"CategoryList_categorySelected__2Y5ut",addCategory:"CategoryList_addCategory__3lajL",newCategory:"CategoryList_newCategory__34-lI"}},544:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(68),s=t.n(r),o=(t(292),t(293),t(27)),i=t(16),l=t(58),d=t.n(l),j=t(157),u=t(21),b=t(28),m=t.n(b),f=function(){return"https://infinty-cashdb-production.up.railway.app/api/v1"};function h(e){var a=e.from,t=e.to,n=new URL("".concat(f(),"/chart/expenses"));return n.search=new URLSearchParams({from:a,to:t}).toString(),fetch(n).then((function(e){return e.json()}))}var x=t(271),p=t.n(x),_=t(272),O=t.n(_),g=(t(301),t(2));var y=function(e){var a=e.initValue,t=e.maxValue,r=e.onSelect,s=e.monthName,o=Object(n.useState)(a),i=Object(u.a)(o,2),l=i[0],d=i[1];m.a.locale("es");var j=c.a.createRef();return Object(g.jsx)(O.a,{ref:j,value:l,onChange:function(e,a){d({year:e,month:a}),r("".concat(e,"-").concat(a)),j.current.dismiss()},years:{max:t},lang:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],children:Object(g.jsx)("div",{className:p.a.monthPicker,onClick:function(){return j.current.show(l)},children:s})})},v=t(105),N=t(547),C=t(546),S=t(283),w=t(114),L=t(52);function A(e){var a=e.data,t=[{name:"Ingresos",value:a.income},{name:"Gastos",value:a.expenses},{name:"Total",value:a.balance}],n=["#218814","#dc3545","#b4b9b2de"],c=Math.PI/180;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(N.a,{width:"100%",height:"36%",children:Object(g.jsx)(C.a,{width:400,height:400,children:Object(g.jsx)(S.a,{data:t,dataKey:"value",nameKey:"name",label:function(e){var t=e.cx,n=e.cy,r=e.midAngle,s=e.innerRadius,o=e.outerRadius,i=e.index,l=s+.3*(o-s),d=t+l*Math.cos(-r*c),j=n+l*Math.sin(-r*c),u=Object(L.a)({amount:a[Object.keys(a)[i]],currency:"EUR"}).setLocale("es-ES").toFormat();return Object(g.jsx)("text",{x:d,y:j,textAnchor:d>t?"start":"end",dominantBaseline:"central",children:"".concat(u," ")})},outerRadius:80,innerRadius:50,labelLine:!1,children:t.map((function(e,a){return Object(g.jsx)(w.a,{fill:n[a%n.length]},"cell-".concat(a))}))})})})})}var T=t(83),I=t.n(T);var M=function(e){var a=e.transactions,t=(e.dataChart,e.selectedYearAndMonth);if(0===a.length)return null;var n,c=0,r=0,s=Object(v.a)(a);try{for(s.s();!(n=s.n()).done;){var o=n.value;"income"===o.type?c+=o.amount:r+=o.amount}}catch(d){s.e(d)}finally{s.f()}var i=c-r,l={income:c,expenses:r,balance:i};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(A,{data:l,selectedYearAndMonth:t}),Object(g.jsxs)("div",{className:I.a.wrapper,children:[Object(g.jsxs)("div",{className:I.a.boxIncome,children:[Object(g.jsx)("span",{children:"Ingresos"}),Object(g.jsx)("span",{children:Object(L.a)({amount:c,currency:"EUR"}).setLocale("es-ES").toFormat()})]}),Object(g.jsxs)("div",{className:I.a.boxExpense,children:[Object(g.jsx)("span",{children:"Gastos"}),Object(g.jsx)("span",{children:Object(L.a)({amount:r,currency:"EUR"}).setLocale("es-ES").toFormat()})]}),Object(g.jsxs)("div",{className:I.a.boxBalance,children:[Object(g.jsx)("span",{children:"Disponibles"}),Object(g.jsx)("span",{children:Object(L.a)({amount:i,currency:"EUR"}).setLocale("es-ES").toFormat()})]})]})]})},E=t.p+"static/media/cash.02cc20ea.svg",Y=(t(270),t(49)),k=t.n(Y);function R(e){var a=e.from,t=e.to,n=new URL("".concat(f(),"/transaction"));return n.search=new URLSearchParams({from:a,to:t}).toString(),fetch(n).then((function(e){return e.json()}))}var F=t(63),B=t.n(F);var P=function(e){var a,t=e.transactions,n={},c=Object(v.a)(t);try{for(c.s();!(a=c.n()).done;){var r=a.value;n[r.date]||(n[r.date]=[]),n[r.date].push(r)}}catch(s){c.e(s)}finally{c.f()}return Object(g.jsx)("div",{className:B.a.wrapper,children:Object.keys(n).map((function(e,a){return Object(g.jsxs)("div",{className:B.a.box,children:[Object(g.jsx)("p",{className:B.a.date,children:m()(e).format("ll")}),n[e].map((function(e,a){var t=e.category,n=e.amount,c=e.type,r=e.image,s=Object(L.a)({amount:n,currency:"EUR"}).setLocale("es-ES").toFormat();return Object(g.jsxs)("div",{className:B.a.rowBox,children:[Object(g.jsx)("i",{className:r}),Object(g.jsxs)("span",{children:[" ",t]}),Object(g.jsx)("span",{className:"".concat(B.a.price," ").concat(B.a[c]),children:s})]},a)}))]},a)}))})},H=(t(538),t(158)),D=t.n(H);var U=function(){return Object(g.jsxs)("div",{className:D.a.loading,children:[Object(g.jsx)("div",{className:"spinner-border text-success",role:"status"}),Object(g.jsx)("div",{className:D.a.title,children:" Loading...."})]})};var J=function(){var e=m()().format("YYYY-MM"),a=Number(m()().format("YYYY")),t=Number(m()().format("M")),c=Object(n.useState)(!1),r=Object(u.a)(c,2),s=r[0],i=r[1],l=Object(n.useState)([]),b=Object(u.a)(l,2),f=b[0],x=b[1],p=Object(n.useState)([]),_=Object(u.a)(p,2),O=_[0],v=_[1],N=Object(n.useState)(e),C=Object(u.a)(N,2),S=C[0],w=C[1],L=function(){var e=Object(j.a)(d.a.mark((function e(a){var t,n,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(a,"-01"),n=m()(a).endOf("month").format("YYYY-MM-DD"),e.next=4,h({from:t,to:n});case 4:c=e.sent,r=c.map((function(e){return{id:e.label,label:e.label,value:e.total}})),x(r);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(d.a.mark((function e(a){var t,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(a,"-01"),n=m()(a).endOf("month").format("YYYY-MM-DD"),console.log("from:",t),console.log("to:",n),e.next=6,R({from:t,to:n});case 6:c=e.sent,v(c);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(i(!0),S){var e=A(S),a=L(S);Promise.all([e,a]).then((function(){i(!1)})).catch((function(e){console.log("Error al cargar datos:",e),i(!1)}))}}),[S]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("header",{className:k.a.header,id:"home",children:[Object(g.jsx)("img",{src:E,className:k.a.imgHeader,alt:"InfinityCash logo"}),"InfinityCash"]}),Object(g.jsx)("main",{className:k.a.main,children:s?Object(g.jsx)(U,{loading:s}):Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:k.a.transactionSumary,children:[Object(g.jsx)(y,{initValue:{year:a,month:t},maxValue:{year:a,month:t},onSelect:function(e){w(e)},monthName:m()(S).format("MMMM")},S),0===f.length&&0===O.length?Object(g.jsx)("div",{className:k.a.dataEmpty,children:"No hay transacciones en este mes, por favor cree una nueva transacci\xf3n \ud83d\udcb8."}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(M,{transactions:O,dataChart:f,selectedYearAndMonth:S}),Object(g.jsx)(P,{transactions:O})]})]})})}),Object(g.jsxs)("footer",{className:k.a.bottomMenu,children:[Object(g.jsxs)(o.b,{to:"/add-transaction/income",className:k.a.newIncome,children:[Object(g.jsx)("i",{className:"fas fa-arrow-down fa-2x"}),Object(g.jsx)("span",{children:"Ingresos"})]}),Object(g.jsxs)(o.b,{to:"/add-transaction/expense",className:k.a.newExpense,children:[Object(g.jsx)("i",{className:"fas fa-arrow-up fa-2x"}),Object(g.jsx)("span",{children:"Gastos"})]})]})]})};var G=t(54),Q=t.n(G);var z=function(e){var a=e.categories,t=e.onSelectCategory,n=e.selectedCategory,c=e.type;return Object(g.jsxs)("div",{className:Q.a.container,children:[a.map((function(e,a){return Object(g.jsx)("p",{className:e.id===n.id?"".concat(Q.a.category," ").concat(Q.a.categorySelected):Q.a.category,onClick:function(){return t(e)},children:Object(g.jsxs)("div",{className:Q.a.imgCategoryBox,children:[Object(g.jsx)("i",{className:e.image}),Object(g.jsx)("span",{children:e.label})]})},a)})),Object(g.jsx)(o.b,{to:"/add-category/".concat(c),className:Q.a.addCategory,children:Object(g.jsx)("div",{className:Q.a.newCategory,children:Object(g.jsx)("i",{className:"fas fa-plus"})})})]})},V=t(287),Z=t.n(V);var X=function(e){var a=e.label,t=e.type,n=void 0===t?"button":t,c=e.to,r=void 0===c?"":c,s=e.className,i=void 0===s?"":s,l=e.onClick,d=void 0===l?function(){}:l,j=Object(g.jsx)("button",{type:n,className:"".concat(Z.a.btn," ").concat(i),onClick:d,children:a});return""===r?j:Object(g.jsxs)(o.b,{to:r,children:[j,"className=",i]})},q=t(35),K=t.n(q),W={income:"Ingresos",expense:"Gastos"};var $=function(){var e=m()().format("YYYY-MM-DD"),a=Object(i.g)(),t=Object(i.h)().type,c=Object(n.useState)(!1),r=Object(u.a)(c,2),s=r[0],l=r[1],d=Object(n.useState)(e),j=Object(u.a)(d,2),b=j[0],h=j[1],x=Object(n.useState)(""),p=Object(u.a)(x,2),_=p[0],O=p[1],y=Object(n.useState)(""),v=Object(u.a)(y,2),N=v[0],C=v[1],S=Object(n.useState)([]),w=Object(u.a)(S,2),L=w[0],A=w[1];Object(n.useEffect)((function(){l(!0),fetch("".concat(f(),"/categories")).then((function(e){return e.json()})).then((function(e){A(e),l(!1)}))}),[]);var T=L.filter((function(e){return e.type===t}));return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:K.a.headerTransaction,children:Object(g.jsxs)(o.b,{to:"/home",className:K.a.leftHome,children:[Object(g.jsx)("i",{className:"fas fa-arrow-left "}),Object(g.jsxs)("h2",{className:K.a.title,children:["A\xf1adir ",Object(g.jsx)("span",{children:W[t]})]})]})}),Object(g.jsxs)("form",{className:K.a.formContainer,onSubmit:function(n){n.preventDefault(),""!==N?function(e,a,t,n){var c={amount:100*e,date:a,categoryId:t.id,selectTransaction:n};return fetch("".concat(f(),"/transaction"),{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}})}(_,b,N,t).then((function(){O(""),h(e),C(""),a.push("/home")})).catch((function(e){console.error(e)})):alert("Por favor, selecione una categoria.")},children:[Object(g.jsxs)("p",{className:K.a.nota,children:[Object(g.jsx)("strong",{children:"Nota: "}),"Selecione la categor\xeda, la fecha y la cantidad. Si su categor\xeda no se encuentra disponible pulse el bot\xf3n + para a\xf1adir una nueva."]}),s?Object(g.jsx)(U,{loading:s}):Object(g.jsx)(z,{selectedCategory:N,categories:T,onSelectCategory:function(e){return C(e)},type:t}),Object(g.jsxs)("div",{className:K.a.formContent,children:[Object(g.jsxs)("label",{children:["Seleccione una fecha",Object(g.jsx)("input",{required:!0,className:K.a.date,type:"date",max:e,onChange:function(e){return h(e.target.value)},value:b})]}),Object(g.jsx)("div",{className:K.a.labelAmount,children:Object(g.jsxs)("label",{children:["Ingrese una cantidad",Object(g.jsx)("input",{className:K.a.amount,required:!0,type:"number",min:"0.01",step:"0.01",placeholder:"0.0 \u20ac",value:_,onChange:function(e){return O(e.target.value)}})]})}),Object(g.jsxs)("div",{className:K.a.buttonContainer,children:[Object(g.jsx)(X,{label:"Enviar",type:"submit"}),Object(g.jsx)(o.b,{to:"/home",children:Object(g.jsx)(X,{label:"Cancelar",type:"reset",className:K.a.buttonCancel})})]})]})]})]})},ee=t(44),ae=t.n(ee),te=["fas fa-lightbulb","fas fa-faucet","fas fa-burn","fas fa-gas-pump","fas fa-car","fas fa-plane-departure","fas fa-subway","fas fa-gamepad","fas fa-laptop","fas fa-luggage-cart","fas fa-briefcase-medical","fas fa-user-md","fas fa-child","fas fa-baby","fas fa-piggy-bank","fas fa-gifts","fas fa-dog","fas fa-cat","fas fa-fish","fas fa-beer","fas fa-ice-cream","fas fa-coffee","fab fa-amazon","fab fa-ebay","fab fa-bitcoin","fas fa-credit-card"],ne=t(84),ce=t.n(ne);var re=function(e){var a=e.onSelectImage,t=e.selectedImage;return Object(g.jsx)("div",{className:ce.a.wrapper,children:te.map((function(e,n){return Object(g.jsx)("div",{className:e===t?"".concat(ce.a.img," ").concat(ce.a.selectedImage):ce.a.img,onClick:function(){return a(e)},children:Object(g.jsx)("i",{className:e})},n)}))})};var se=function(){var e=Object(i.h)().type,a=Object(n.useState)(""),t=Object(u.a)(a,2),c=t[0],r=t[1],s=Object(n.useState)(""),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Object(i.g)();return Object(g.jsxs)("div",{className:ae.a.container,children:[Object(g.jsx)("header",{className:ae.a.header,children:Object(g.jsxs)(o.b,{to:"/home",className:ae.a.categoryLink,children:[Object(g.jsx)("i",{className:"fas fa-arrow-left"}),Object(g.jsx)("p",{className:ae.a.title,children:"Regresar"})]})}),Object(g.jsx)("form",{className:ae.a.wrapper,onSubmit:function(a){a.preventDefault(),""!==d?function(e,a,t){var n={label:e,type:a,image:t};return console.log("body",n),fetch("".concat(f(),"/categories"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}(c,e,d).then((function(){r(""),j(""),b.push("/add-transaction/".concat(e))})).catch((function(e){console.error(e)})):alert("Please, select a image")},children:Object(g.jsxs)("fieldset",{className:ae.a.fielset,children:[Object(g.jsx)("legend",{children:"A\xf1adir categoria"}),Object(g.jsx)("div",{className:ae.a.image,children:Object(g.jsx)(re,{onSelectImage:function(e){return j(e)},selectedImage:d})}),Object(g.jsxs)("label",{className:ae.a.label,children:["Nombre de la categoria",Object(g.jsx)("input",{className:ae.a.labelInput,required:!0,type:"text",value:c,placeholder:"",onChange:function(e){return r(e.target.value)}})]}),Object(g.jsx)(X,{label:"A\xf1adir",type:"submit"})]})})]})};function oe(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(o.a,{children:Object(g.jsxs)(i.d,{children:[Object(g.jsx)(i.b,{exact:!0,path:"/home",children:Object(g.jsx)(J,{})}),Object(g.jsx)(i.b,{exact:!0,path:"/add-transaction/:type",children:Object(g.jsx)($,{})}),Object(g.jsx)(i.b,{path:"/add-category/:type",children:Object(g.jsx)(se,{})}),Object(g.jsx)(i.a,{to:"/home"})]})})})}var ie=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,548)).then((function(a){var t=a.getCLS,n=a.getFID,c=a.getFCP,r=a.getLCP,s=a.getTTFB;t(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(oe,{})}),document.getElementById("root")),ie()},63:function(e,a,t){e.exports={wrapper:"TransactionList_wrapper__1_lYr",box:"TransactionList_box__3i8st",date:"TransactionList_date__h0uZR",rowBox:"TransactionList_rowBox__1eETZ",price:"TransactionList_price__2yglD",income:"TransactionList_income__2PinZ",expense:"TransactionList_expense__2ecD0"}},83:function(e,a,t){e.exports={wrapper:"Summary_wrapper__2Ez_V",boxIncome:"Summary_boxIncome__1-QWG",boxBalance:"Summary_boxBalance__1b48k",boxExpense:"Summary_boxExpense__1Sujn"}},84:function(e,a,t){e.exports={wrapper:"ImageList_wrapper__uR7kT",selectedImage:"ImageList_selectedImage__2SbTx",img:"ImageList_img__pM5vM"}}},[[544,1,2]]]);
//# sourceMappingURL=main.f45000cc.chunk.js.map